#!/bin/sh

#
# If the hostname isn't given, take it from the name of the current tmux window.
#
: ${host:="`tmux list-panes -F '#{window_name}'`"}

if [ "$host" == "" ]; then
	echo "$$host not specified and not running in a tmux session"
	exit 1
fi


#
# Allow manual specification of the tmux path.
#
: ${tmux:="tmux"}

autossh -t -M 0 $host $* "$tmux attach || $tmux"
